<!DOCTYPE html>
<html lang="km">
<head>
    <!-- ===============================================
         TOKKATOT - AI DISEASE DETECTION PAGE
         ===============================================
         Smart Poultry System - AI-Powered Disease Detection
         Author: CamTech University Students
         Description: Mobile-optimized disease detection interface
         Features: Camera integration, drag-drop upload, real-time AI analysis
         =============================================== -->
    
    <!-- Meta Information -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <meta name="description" content="ប្រព័ន្ធរកជំងឺមាន់ដោយប្រើបច្ចេកវិទ្យា AI - តុក្កាតុត">
    <meta name="keywords" content="AI, ជំងឺមាន់, ការវិភាគរូបភាព, កសិកម្មឆ្លាតវៃ">
    <meta name="author" content="CamTech University">
    
    <!-- Progressive Web App -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="តុក្កាតុត AI">
    <meta name="theme-color" content="#FFBA49">
    
    <!-- Page Title -->
    <title>ការរកជំងឺដោយ AI - តុក្កាតុត</title>
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="../css/styleHeader.css">
    <link rel="stylesheet" href="../css/stylenavbar.css">
    <link rel="stylesheet" href="../css/styleHome.css">
    <link rel="stylesheet" href="../css/styleDiseaseDetection.css">
    
    <!-- Favicon -->
            <!-- Favicon -->
        <link rel="icon" href="../assets/images/tokkatot logo-02.png" type="image/x-icon" />
        
        <!-- PWA Manifest -->
        <link rel="manifest" href="../manifest.json" />
        <meta name="theme-color" content="#00cc99" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="default" />
        <meta name="apple-mobile-web-app-title" content="Tokkatot" />
        <link rel="apple-touch-icon" href="../assets/images/tokkatot logo-02.png" />
    
    <!-- Preload Critical Resources -->
    <link rel="preload" href="../js/diseaseDetection.js" as="script">
    <link rel="preload" href="../assets/fonts/kantumruy-pro.woff2" as="font" type="font/woff2" crossorigin>
</head>

<body class="disease-detection-body">
    <!-- Skip to Main Content (Accessibility) -->
    <a href="#main-disease-content" class="skip-link">ចំណាំៈ ខ្លីនៅខ្លឹមសារសំខាន់</a>
    
    <!-- Header Component Container -->
    <div id="header" role="banner"></div>
    
    <!-- Navigation Component Container -->
    <div id="navbar" role="navigation"></div>

    <!-- Main Content Area -->
    <main id="main-disease-content" class="disease-detection-container" role="main">
        <!-- Page Header -->
        <header class="detection-page-header">
            <h1 class="detection-page-title">
                <span role="img" aria-label="មីក្រូទស្សន៍">🔬</span>
                ប្រព័ន្ធពិនិត្យជំងឺមាន់ដោយប្រើ AI
            </h1>
            <p class="detection-page-subtitle">
                ថតរូប ឬបញ្ចូលរូបភាពលាមកមាន់ ដើម្បីរកជំងឺដោយប្រើបច្ចេកវិទ្យា AI
            </p>
        </header>

        <!-- Image Upload Section -->
        <section class="detection-upload-section" aria-labelledby="upload-heading">
            <h2 id="upload-heading" class="detection-sr-only">ការបញ្ចូលរូបភាព</h2>
            
            <div 
                class="detection-upload-area" 
                id="uploadArea"
                role="button"
                tabindex="0"
                aria-label="ជ្រើសរើសរូបភាពសម្រាប់វិភាគជំងឺ"
                aria-describedby="upload-instructions"
            >
                <div>
                    <h3>
                        <span role="img" aria-label="កាមេរ៉ា">📸</span>
                        ថតរូប ឬបញ្ចូលរូបភាព
                    </h3>
                    <p id="upload-instructions" class="detection-upload-instruction">
                        អូសរូបភាពមកទីនេះ ឬប្រើប៊ូតុងខាងក្រោម<br>
                        <strong>ទ្រង់ទ្រាយស្រាប់:</strong> JPEG, PNG, WebP<br>
                        <strong>ទំហំអតិបរមា:</strong> 10MB
                    </p>
                    
                    <div class="detection-button-container">
                        <button 
                            class="detection-camera-button" 
                            id="cameraBtn"
                            type="button"
                            aria-label="បើកកាមេរ៉ាដើម្បីថតរូប"
                        >
                            <span role="img" aria-hidden="true">📷</span>
                            ថតរូប
                        </button>
                        
                        <button 
                            class="detection-upload-button" 
                            id="uploadBtn"
                            type="button"
                            aria-label="ជ្រើសរើសរូបភាពពីឧបករណ៍"
                        >
                            <span role="img" aria-hidden="true">📁</span>
                            បញ្ចូលរូបភាព
                        </button>
                    </div>
                    
                    <!-- Hidden File Inputs -->
                    <input 
                        type="file" 
                        id="fileInput" 
                        accept="image/*" 
                        capture="environment" 
                        style="display: none;"
                        aria-label="ជ្រើសរើសរូបភាពពីកាមេរ៉ា"
                    >
                    <input 
                        type="file" 
                        id="uploadInput" 
                        accept="image/*" 
                        style="display: none;"
                        aria-label="ជ្រើសរើសរូបភាពពីឧបករណ៍"
                    >
                </div>
            </div>
        </section>

        <!-- Image Preview Section -->
        <section class="detection-preview-section" aria-labelledby="preview-heading">
            <h2 id="preview-heading" class="detection-sr-only">ការមើលរូបភាពជាមុន</h2>
            <img 
                id="imagePreview" 
                class="detection-image-preview detection-hidden" 
                alt="រូបភាពសម្រាប់វិភាគ"
                role="img"
                aria-describedby="preview-description"
            >
            <div id="preview-description" class="detection-sr-only">
                រូបភាពដែលបានជ្រើសរើសសម្រាប់ការវិភាគជំងឺ
            </div>
        </section>

        <!-- Loading Section -->
        <section class="detection-loading" id="loading" aria-live="polite" aria-label="ការដំណើរការ">
            <div class="detection-spinner" role="status" aria-hidden="true"></div>
            <p><strong>កំពុងវិភាគរូបភាពដោយ AI...</strong></p>
            <p class="detection-sr-only">សូមរង់ចាំ ការវិភាគកំពុងដំណើរការ</p>
        </section>

        <!-- Results Section -->
        <section class="detection-result-container" id="resultContainer" aria-live="polite">
            <header>
                <h2 id="resultTitle" class="detection-result-title"></h2>
            </header>
            
            <!-- Confidence Display -->
            <div class="detection-confidence-section">
                <div class="detection-confidence-label">
                    <strong>កម្រិតជឿជាក់:</strong>
                    <span id="confidenceText" aria-live="polite"></span>
                </div>
                <div class="detection-confidence-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100">
                    <div class="detection-confidence-fill" id="confidenceFill"></div>
                </div>
            </div>
            
            <!-- Recommendations -->
            <div class="detection-recommendations" id="recommendations">
                <strong>ការណែនាំ:</strong>
                <p id="recommendationText"></p>
            </div>

            <!-- Reset Button -->
            <button 
                class="detection-reset-button" 
                onclick="resetDetection()"
                type="button"
                aria-label="កំណត់ឡើងវិញសម្រាប់ការវិភាគថ្មី"
            >
                <span role="img" aria-hidden="true">🔄</span>
                វិភាគរូបភាពផ្សេងទៀត
            </button>
        </section>
    </main>

    <!-- Footer (Optional) -->
    <footer class="detection-footer" role="contentinfo">
        <p class="detection-sr-only">
            បច្ចេកវិទ្យា AI សម្រាប់ការរកជំងឺមាន់ - កំណែ ១.០
        </p>
    </footer>

    <!-- JavaScript Files -->
    <script src="../js/header.js" defer></script>
    <script src="../js/navbar.js" defer></script>
    <script src="../js/diseaseDetection.js" defer></script>
    
    <!-- Notification Styles (Inline for performance) -->
    <style>
        .detection-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            max-width: 300px;
            padding: 12px 16px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .detection-notification.show {
            transform: translateX(0);
        }
        
        .detection-notification.error {
            background: #dc3545;
        }
        
        .detection-notification.warning {
            background: #ffc107;
            color: #212529;
        }
        
        .detection-notification.info {
            background: #17a2b8;
        }
        
        .skip-link {
            position: absolute;
            top: -40px;
            left: 6px;
            background: #000;
            color: #fff;
            padding: 8px;
            text-decoration: none;
            border-radius: 4px;
            z-index: 1001;
        }
        
        .skip-link:focus {
            top: 6px;
        }
        
        @media (max-width: 768px) {
            .detection-notification {
                right: 10px;
                left: 10px;
                max-width: none;
                transform: translateY(-100%);
            }
            
            .detection-notification.show {
                transform: translateY(0);
            }
        }
    </style>
</body>
</html>

</body>
</html>
